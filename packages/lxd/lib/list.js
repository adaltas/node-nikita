// Generated by CoffeeScript 2.6.1
// # `nikita.lxc.list`

// List the instances managed by LXD.

// ## Example

// ```js
// const { list } = await nikita.lxc.list({
//   filter: "containers",
// });
// console.info(`LXD containers: ${list}`);
// ```

// ## Schema definitions
var definitions, handler;

definitions = {
  config: {
    type: 'object',
    properties: {
      'filter': {
        type: 'string',
        enum: ['containers', 'virtual-machines', 'instances'],
        default: 'instances',
        description: `Display only one type of instances.`
      }
    }
  }
};

// ## Handler
handler = async function({config}) {
  var data, i;
  ({data} = (await this.lxc.query({
    $shy: false,
    path: `/1.0/${config.filter}`
  })));
  return {
    list: (function() {
      var j, len, results;
      results = [];
      for (j = 0, len = data.length; j < len; j++) {
        i = data[j];
        results.push(i.split('/').pop());
      }
      return results;
    })()
  };
};

// ## Exports
module.exports = {
  handler: handler,
  metadata: {
    definitions: definitions,
    shy: true
  }
};
