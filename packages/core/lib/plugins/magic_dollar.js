// Generated by CoffeeScript 2.6.1
/*
The `magic_dollar` plugin extract all variables starting with a dollar sign.
*/
var is_object_literal;

({is_object_literal} = require('mixme'));

module.exports = {
  name: '@nikitajs/core/lib/plugins/magic_dollar',
  hooks: {
    'nikita:normalize': {
      handler: function(action) {
        var k, prop, results, v;
        results = [];
        for (k in action) {
          v = action[k];
          if (k[0] !== '$') {
            continue;
          }
          prop = k.substr(1);
          switch (prop) {
            case 'handler':
              action.handler = v;
              break;
            case 'parent':
              action.parent = v;
              break;
            case 'scheduler':
              action.scheduler = v;
              break;
            default:
              action.metadata[prop] = v;
          }
          results.push(delete action[k]);
        }
        return results;
      }
    }
  }
};
