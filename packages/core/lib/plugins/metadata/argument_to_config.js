// Generated by CoffeeScript 2.6.1
/*
The `argument` plugin map an argument which is not an object into a configuration property.

*/
var mutate;

({mutate} = require('mixme'));

module.exports = {
  name: '@nikitajs/core/lib/plugins/metadata/argument_to_config',
  hooks: {
    'nikita:schema': function({schema}) {
      return mutate(schema.definitions.metadata.properties, {
        argument_to_config: {
          type: 'string',
          description: `Maps the argument passed to the action to a configuration property.`
        }
      });
    },
    'nikita:action': {
      before: ['@nikitajs/core/lib/plugins/metadata/schema'],
      handler: function(action) {
        var base, name;
        if (action.metadata.argument_to_config) {
          return (base = action.config)[name = action.metadata.argument_to_config] != null ? base[name] : base[name] = action.metadata.argument;
        }
      }
    }
  }
};
