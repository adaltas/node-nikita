<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.6d82a24cc2891ca3975f.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 3.8.1"/><style id="jss-server-side">@media (min-width:0px){.jss3{display:none}}@media (min-width:960px){.jss3{display:block}}.MuiPaper-root{color:rgba(0,0,0,.87);transition:box-shadow .3s cubic-bezier(.4, 0, .2, 1) 0s;background-color:#fff}.MuiPaper-rounded{border-radius:4px}.MuiPaper-outlined{border:1px solid rgba(0,0,0,.12)}.MuiPaper-elevation0{box-shadow:none}.MuiPaper-elevation1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.MuiPaper-elevation2{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.MuiPaper-elevation3{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.MuiPaper-elevation4{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.MuiPaper-elevation5{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.MuiPaper-elevation6{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiPaper-elevation7{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.MuiPaper-elevation8{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiPaper-elevation9{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.MuiPaper-elevation10{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.MuiPaper-elevation11{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.MuiPaper-elevation12{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiPaper-elevation13{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.MuiPaper-elevation14{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.MuiPaper-elevation15{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.MuiPaper-elevation16{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.MuiPaper-elevation17{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.MuiPaper-elevation18{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.MuiPaper-elevation19{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.MuiPaper-elevation20{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.MuiPaper-elevation21{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.MuiPaper-elevation22{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.MuiPaper-elevation23{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.MuiPaper-elevation24{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.MuiAppBar-root{width:100%;display:flex;z-index:1100;box-sizing:border-box;flex-shrink:0;flex-direction:column}.MuiAppBar-positionFixed{top:0;left:auto;right:0;position:fixed}@media print{.MuiAppBar-positionFixed{position:absolute}}.MuiAppBar-positionAbsolute{top:0;left:auto;right:0;position:absolute}.MuiAppBar-positionSticky{top:0;left:auto;right:0;position:sticky}.MuiAppBar-positionStatic{position:static}.MuiAppBar-positionRelative{position:relative}.MuiAppBar-colorDefault{color:rgba(0,0,0,.87);background-color:#f5f5f5}.MuiAppBar-colorPrimary{color:#fff;background-color:#12182f}.MuiAppBar-colorSecondary{color:#fff;background-color:#f50057}.MuiAppBar-colorInherit{color:inherit}.MuiAppBar-colorTransparent{color:inherit;background-color:transparent}.MuiToolbar-root{display:flex;position:relative;align-items:center}.MuiToolbar-gutters{padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiToolbar-gutters{padding-left:24px;padding-right:24px}}.MuiToolbar-regular{min-height:56px}@media (min-width:0px) and (orientation:landscape){.MuiToolbar-regular{min-height:48px}}@media (min-width:600px){.MuiToolbar-regular{min-height:64px}}.MuiToolbar-dense{min-height:48px}.MuiButtonBase-root{color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiButtonBase-root::-moz-focus-inner{border-style:none}.MuiButtonBase-root.Mui-disabled{cursor:default;pointer-events:none}@media print{.MuiButtonBase-root{color-adjust:exact}}.MuiIconButton-root{flex:0 0 auto;color:rgba(0,0,0,.54);padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(.4, 0, .2, 1) 0s;border-radius:50%}.MuiIconButton-root:hover{background-color:rgba(0,0,0,.04)}.MuiIconButton-root.Mui-disabled{color:rgba(0,0,0,.26);background-color:transparent}@media (hover:none){.MuiIconButton-root:hover{background-color:transparent}}.MuiIconButton-edgeStart{margin-left:-12px}.MuiIconButton-sizeSmall.MuiIconButton-edgeStart{margin-left:-3px}.MuiIconButton-edgeEnd{margin-right:-12px}.MuiIconButton-sizeSmall.MuiIconButton-edgeEnd{margin-right:-3px}.MuiIconButton-colorInherit{color:inherit}.MuiIconButton-colorPrimary{color:#12182f}.MuiIconButton-colorPrimary:hover{background-color:rgba(18,24,47,.04)}@media (hover:none){.MuiIconButton-colorPrimary:hover{background-color:transparent}}.MuiIconButton-colorSecondary{color:#f50057}.MuiIconButton-colorSecondary:hover{background-color:rgba(245,0,87,.04)}@media (hover:none){.MuiIconButton-colorSecondary:hover{background-color:transparent}}.MuiIconButton-sizeSmall{padding:3px;font-size:1.125rem}.MuiIconButton-label{width:100%;display:flex;align-items:inherit;justify-content:inherit}.MuiTooltip-popper{z-index:1500;pointer-events:none}.MuiTooltip-popperInteractive{pointer-events:auto}.MuiTooltip-popperArrow[x-placement*=bottom] .MuiTooltip-arrow{top:0;left:0;margin-top:-.71em;margin-left:4px;margin-right:4px}.MuiTooltip-popperArrow[x-placement*=top] .MuiTooltip-arrow{left:0;bottom:0;margin-left:4px;margin-right:4px;margin-bottom:-.71em}.MuiTooltip-popperArrow[x-placement*=right] .MuiTooltip-arrow{left:0;width:.71em;height:1em;margin-top:4px;margin-left:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow[x-placement*=left] .MuiTooltip-arrow{right:0;width:.71em;height:1em;margin-top:4px;margin-right:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow[x-placement*=left] .MuiTooltip-arrow::before{transform-origin:0 0}.MuiTooltip-popperArrow[x-placement*=right] .MuiTooltip-arrow::before{transform-origin:100% 100%}.MuiTooltip-popperArrow[x-placement*=top] .MuiTooltip-arrow::before{transform-origin:100% 0}.MuiTooltip-popperArrow[x-placement*=bottom] .MuiTooltip-arrow::before{transform-origin:0 100%}.MuiTooltip-tooltip{color:#fff;padding:4px 8px;font-size:.625rem;max-width:300px;word-wrap:break-word;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:1.4em;border-radius:4px;background-color:rgba(97,97,97,.9)}.MuiTooltip-tooltipArrow{margin:0;position:relative}.MuiTooltip-arrow{color:rgba(97,97,97,.9);width:1em;height:.71em;overflow:hidden;position:absolute;box-sizing:border-box}.MuiTooltip-arrow::before{width:100%;height:100%;margin:auto;content:"";display:block;transform:rotate(45deg);background-color:currentColor}.MuiTooltip-touch{padding:8px 16px;font-size:.875rem;font-weight:400;line-height:1.14286em}.MuiTooltip-tooltipPlacementLeft{margin:0 24px;transform-origin:right center}@media (min-width:600px){.MuiTooltip-tooltipPlacementLeft{margin:0 14px}}.MuiTooltip-tooltipPlacementRight{margin:0 24px;transform-origin:left center}@media (min-width:600px){.MuiTooltip-tooltipPlacementRight{margin:0 14px}}.MuiTooltip-tooltipPlacementTop{margin:24px 0;transform-origin:center bottom}@media (min-width:600px){.MuiTooltip-tooltipPlacementTop{margin:14px 0}}.MuiTooltip-tooltipPlacementBottom{margin:24px 0;transform-origin:center top}@media (min-width:600px){.MuiTooltip-tooltipPlacementBottom{margin:14px 0}}.MuiSvgIcon-root{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:1.5rem;transition:fill .2s cubic-bezier(.4, 0, .2, 1) 0s;flex-shrink:0;user-select:none}.MuiSvgIcon-colorPrimary{color:#12182f}.MuiSvgIcon-colorSecondary{color:#f50057}.MuiSvgIcon-colorAction{color:rgba(0,0,0,.54)}.MuiSvgIcon-colorError{color:#f44336}.MuiSvgIcon-colorDisabled{color:rgba(0,0,0,.26)}.MuiSvgIcon-fontSizeInherit{font-size:inherit}.MuiSvgIcon-fontSizeSmall{font-size:1.25rem}.MuiSvgIcon-fontSizeLarge{font-size:2.1875rem}.MuiTypography-root{margin:0}.MuiTypography-body2{font-size:.875rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.43}.MuiTypography-body1{font-size:1rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.6rem}.MuiTypography-caption{font-size:.75rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.66}.MuiTypography-button{font-size:.875rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:1.75;text-transform:uppercase}.MuiTypography-h1{color:#777;font-size:2rem;word-wrap:break-word;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:300;line-height:1.167}@media (min-width:600px){.MuiTypography-h1{font-size:2.5707rem}}@media (min-width:960px){.MuiTypography-h1{font-size:2.7849rem}}@media (min-width:1280px){.MuiTypography-h1{font-size:2.9991rem}}.MuiTypography-h2{color:#777;font-size:1.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:300;line-height:1.2;scroll-margin-top:calc(74px + 1rem)}@media (min-width:600px){.MuiTypography-h2{font-size:1.6667rem}}@media (min-width:960px){.MuiTypography-h2{font-size:1.875rem}}@media (min-width:1280px){.MuiTypography-h2{font-size:2.0833rem}}.MuiTypography-h3{color:#777;font-size:1.25rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.167;scroll-margin-top:calc(74px + 1rem)}@media (min-width:600px){.MuiTypography-h3{font-size:1.2853rem}}@media (min-width:960px){.MuiTypography-h3{font-size:1.4996rem}}@media (min-width:1280px){.MuiTypography-h3{font-size:1.4996rem}}.MuiTypography-h4{font-size:1.5625rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.235}@media (min-width:600px){.MuiTypography-h4{font-size:1.8219rem}}@media (min-width:960px){.MuiTypography-h4{font-size:2.0243rem}}@media (min-width:1280px){.MuiTypography-h4{font-size:2.0243rem}}.MuiTypography-h5{font-size:1.25rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.334}@media (min-width:600px){.MuiTypography-h5{font-size:1.3118rem}}@media (min-width:960px){.MuiTypography-h5{font-size:1.4993rem}}@media (min-width:1280px){.MuiTypography-h5{font-size:1.4993rem}}.MuiTypography-h6{font-size:1.125rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:1.6}@media (min-width:600px){.MuiTypography-h6{font-size:1.25rem}}@media (min-width:960px){.MuiTypography-h6{font-size:1.25rem}}@media (min-width:1280px){.MuiTypography-h6{font-size:1.25rem}}.MuiTypography-subtitle1{font-size:1rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.75}.MuiTypography-subtitle2{font-size:.875rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:1.57}.MuiTypography-overline{font-size:.75rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:2.66;text-transform:uppercase}.MuiTypography-srOnly{width:1px;height:1px;overflow:hidden;position:absolute}.MuiTypography-alignLeft{text-align:left}.MuiTypography-alignCenter{text-align:center}.MuiTypography-alignRight{text-align:right}.MuiTypography-alignJustify{text-align:justify}.MuiTypography-noWrap{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.MuiTypography-gutterBottom{margin-bottom:.35em}.MuiTypography-paragraph{margin-bottom:16px}.MuiTypography-colorInherit{color:inherit}.MuiTypography-colorPrimary{color:#12182f}.MuiTypography-colorSecondary{color:#f50057}.MuiTypography-colorTextPrimary{color:rgba(0,0,0,.87)}.MuiTypography-colorTextSecondary{color:rgba(0,0,0,.54)}.MuiTypography-colorError{color:#f44336}.MuiTypography-displayInline{display:inline}.MuiTypography-displayBlock{display:block}.MuiButton-root{color:rgba(0,0,0,.87);padding:6px 16px;font-size:.875rem;min-width:64px;box-sizing:border-box;transition:background-color 250ms cubic-bezier(.4, 0, .2, 1) 0s,box-shadow 250ms cubic-bezier(.4, 0, .2, 1) 0s,border 250ms cubic-bezier(.4, 0, .2, 1) 0s;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:1.75;border-radius:4px;text-transform:uppercase}.MuiButton-root:hover{text-decoration:none;background-color:rgba(0,0,0,.04)}.MuiButton-root.Mui-disabled{color:rgba(0,0,0,.26)}@media (hover:none){.MuiButton-root:hover{background-color:transparent}}.MuiButton-root:hover.Mui-disabled{background-color:transparent}.MuiButton-label{width:100%;display:inherit;align-items:inherit;justify-content:inherit}.MuiButton-text{padding:6px 8px}.MuiButton-textPrimary{color:#12182f}.MuiButton-textPrimary:hover{background-color:rgba(18,24,47,.04)}@media (hover:none){.MuiButton-textPrimary:hover{background-color:transparent}}.MuiButton-textSecondary{color:#f50057}.MuiButton-textSecondary:hover{background-color:rgba(245,0,87,.04)}@media (hover:none){.MuiButton-textSecondary:hover{background-color:transparent}}.MuiButton-outlined{border:1px solid rgba(0,0,0,.23);padding:5px 15px}.MuiButton-outlined.Mui-disabled{border:1px solid rgba(0,0,0,.12)}.MuiButton-outlinedPrimary{color:#12182f;border:1px solid rgba(18,24,47,.5)}.MuiButton-outlinedPrimary:hover{border:1px solid #12182f;background-color:rgba(18,24,47,.04)}@media (hover:none){.MuiButton-outlinedPrimary:hover{background-color:transparent}}.MuiButton-outlinedSecondary{color:#f50057;border:1px solid rgba(245,0,87,.5)}.MuiButton-outlinedSecondary:hover{border:1px solid #f50057;background-color:rgba(245,0,87,.04)}.MuiButton-outlinedSecondary.Mui-disabled{border:1px solid rgba(0,0,0,.26)}@media (hover:none){.MuiButton-outlinedSecondary:hover{background-color:transparent}}.MuiButton-contained{color:rgba(0,0,0,.87);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}.MuiButton-contained:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);background-color:#d5d5d5}.MuiButton-contained.Mui-focusVisible{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiButton-contained:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiButton-contained.Mui-disabled{color:rgba(0,0,0,.26);box-shadow:none;background-color:rgba(0,0,0,.12)}@media (hover:none){.MuiButton-contained:hover{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}}.MuiButton-contained:hover.Mui-disabled{background-color:rgba(0,0,0,.12)}.MuiButton-containedPrimary{color:#fff;background-color:#12182f}.MuiButton-containedPrimary:hover{background-color:#0c1020}@media (hover:none){.MuiButton-containedPrimary:hover{background-color:#12182f}}.MuiButton-containedSecondary{color:#fff;background-color:#f50057}.MuiButton-containedSecondary:hover{background-color:#c51162}@media (hover:none){.MuiButton-containedSecondary:hover{background-color:#f50057}}.MuiButton-disableElevation{box-shadow:none}.MuiButton-disableElevation:hover{box-shadow:none}.MuiButton-disableElevation.Mui-focusVisible{box-shadow:none}.MuiButton-disableElevation:active{box-shadow:none}.MuiButton-disableElevation.Mui-disabled{box-shadow:none}.MuiButton-colorInherit{color:inherit;border-color:currentColor}.MuiButton-textSizeSmall{padding:4px 5px;font-size:.8125rem}.MuiButton-textSizeLarge{padding:8px 11px;font-size:.9375rem}.MuiButton-outlinedSizeSmall{padding:3px 9px;font-size:.8125rem}.MuiButton-outlinedSizeLarge{padding:7px 21px;font-size:.9375rem}.MuiButton-containedSizeSmall{padding:4px 10px;font-size:.8125rem}.MuiButton-containedSizeLarge{padding:8px 22px;font-size:.9375rem}.MuiButton-fullWidth{width:100%}.MuiButton-startIcon{display:inherit;margin-left:-4px;margin-right:8px}.MuiButton-startIcon.MuiButton-iconSizeSmall{margin-left:-2px}.MuiButton-endIcon{display:inherit;margin-left:8px;margin-right:-4px}.MuiButton-endIcon.MuiButton-iconSizeSmall{margin-right:-2px}.MuiButton-iconSizeSmall>:first-child{font-size:18px}.MuiButton-iconSizeMedium>:first-child{font-size:20px}.MuiButton-iconSizeLarge>:first-child{font-size:22px}.MuiGrid-container{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.MuiGrid-item{margin:0;box-sizing:border-box}.MuiGrid-zeroMinWidth{min-width:0}.MuiGrid-direction-xs-column{flex-direction:column}.MuiGrid-direction-xs-column-reverse{flex-direction:column-reverse}.MuiGrid-direction-xs-row-reverse{flex-direction:row-reverse}.MuiGrid-wrap-xs-nowrap{flex-wrap:nowrap}.MuiGrid-wrap-xs-wrap-reverse{flex-wrap:wrap-reverse}.MuiGrid-align-items-xs-center{align-items:center}.MuiGrid-align-items-xs-flex-start{align-items:flex-start}.MuiGrid-align-items-xs-flex-end{align-items:flex-end}.MuiGrid-align-items-xs-baseline{align-items:baseline}.MuiGrid-align-content-xs-center{align-content:center}.MuiGrid-align-content-xs-flex-start{align-content:flex-start}.MuiGrid-align-content-xs-flex-end{align-content:flex-end}.MuiGrid-align-content-xs-space-between{align-content:space-between}.MuiGrid-align-content-xs-space-around{align-content:space-around}.MuiGrid-justify-xs-center{justify-content:center}.MuiGrid-justify-xs-flex-end{justify-content:flex-end}.MuiGrid-justify-xs-space-between{justify-content:space-between}.MuiGrid-justify-xs-space-around{justify-content:space-around}.MuiGrid-justify-xs-space-evenly{justify-content:space-evenly}.MuiGrid-spacing-xs-1{width:calc(100% + 8px);margin:-4px}.MuiGrid-spacing-xs-1>.MuiGrid-item{padding:4px}.MuiGrid-spacing-xs-2{width:calc(100% + 16px);margin:-8px}.MuiGrid-spacing-xs-2>.MuiGrid-item{padding:8px}.MuiGrid-spacing-xs-3{width:calc(100% + 24px);margin:-12px}.MuiGrid-spacing-xs-3>.MuiGrid-item{padding:12px}.MuiGrid-spacing-xs-4{width:calc(100% + 32px);margin:-16px}.MuiGrid-spacing-xs-4>.MuiGrid-item{padding:16px}.MuiGrid-spacing-xs-5{width:calc(100% + 40px);margin:-20px}.MuiGrid-spacing-xs-5>.MuiGrid-item{padding:20px}.MuiGrid-spacing-xs-6{width:calc(100% + 48px);margin:-24px}.MuiGrid-spacing-xs-6>.MuiGrid-item{padding:24px}.MuiGrid-spacing-xs-7{width:calc(100% + 56px);margin:-28px}.MuiGrid-spacing-xs-7>.MuiGrid-item{padding:28px}.MuiGrid-spacing-xs-8{width:calc(100% + 64px);margin:-32px}.MuiGrid-spacing-xs-8>.MuiGrid-item{padding:32px}.MuiGrid-spacing-xs-9{width:calc(100% + 72px);margin:-36px}.MuiGrid-spacing-xs-9>.MuiGrid-item{padding:36px}.MuiGrid-spacing-xs-10{width:calc(100% + 80px);margin:-40px}.MuiGrid-spacing-xs-10>.MuiGrid-item{padding:40px}.MuiGrid-grid-xs-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xs-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xs-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xs-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xs-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xs-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xs-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xs-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xs-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xs-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xs-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xs-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xs-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xs-12{flex-grow:0;max-width:100%;flex-basis:100%}@media (min-width:600px){.MuiGrid-grid-sm-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-sm-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-sm-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-sm-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-sm-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-sm-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-sm-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-sm-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-sm-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-sm-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-sm-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-sm-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-sm-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-sm-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:960px){.MuiGrid-grid-md-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-md-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-md-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-md-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-md-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-md-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-md-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-md-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-md-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-md-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-md-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-md-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-md-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-md-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1280px){.MuiGrid-grid-lg-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-lg-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-lg-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-lg-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-lg-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-lg-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-lg-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-lg-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-lg-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-lg-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-lg-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-lg-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-lg-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-lg-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1920px){.MuiGrid-grid-xl-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xl-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xl-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xl-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xl-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xl-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xl-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xl-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xl-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xl-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xl-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xl-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xl-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xl-12{flex-grow:0;max-width:100%;flex-basis:100%}}.MuiListItemText-root{flex:1 1 auto;min-width:0;margin-top:4px;margin-bottom:4px}.MuiListItemText-multiline{margin-top:6px;margin-bottom:6px}.MuiListItemText-inset{padding-left:56px}.MuiListItemSecondaryAction-root{top:50%;right:16px;position:absolute;transform:translateY(-50%)}.MuiListItem-root{width:100%;display:flex;position:relative;box-sizing:border-box;text-align:left;align-items:center;padding-top:8px;padding-bottom:8px;justify-content:flex-start;text-decoration:none}.MuiListItem-root.Mui-focusVisible{background-color:rgba(0,0,0,.08)}.MuiListItem-root.Mui-selected,.MuiListItem-root.Mui-selected:hover{background-color:rgba(0,0,0,.08)}.MuiListItem-root.Mui-disabled{opacity:.5}.MuiListItem-container{position:relative}.MuiListItem-dense{padding-top:4px;padding-bottom:4px}.MuiListItem-alignItemsFlexStart{align-items:flex-start}.MuiListItem-divider{border-bottom:1px solid rgba(0,0,0,.12);background-clip:padding-box}.MuiListItem-gutters{padding-left:16px;padding-right:16px}.MuiListItem-button{transition:background-color 150ms cubic-bezier(.4, 0, .2, 1) 0s}.MuiListItem-button:hover{text-decoration:none;background-color:rgba(0,0,0,.04)}@media (hover:none){.MuiListItem-button:hover{background-color:transparent}}.MuiListItem-secondaryAction{padding-right:48px}.MuiMenuItem-root{width:auto;overflow:hidden;font-size:1rem;box-sizing:border-box;min-height:48px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.6rem;padding-top:6px;white-space:nowrap;padding-bottom:6px}@media (min-width:600px){.MuiMenuItem-root{min-height:auto}}.MuiMenuItem-dense{font-size:.875rem;min-height:auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;line-height:1.43}.MuiList-root{margin:0;padding:0;position:relative;list-style:none}.MuiList-padding{padding-top:8px;padding-bottom:8px}.MuiList-subheader{padding-top:0}.MuiCollapse-container{height:0;overflow:hidden;transition:height .3s cubic-bezier(.4, 0, .2, 1) 0s}.MuiCollapse-entered{height:auto;overflow:visible}.MuiCollapse-hidden{visibility:hidden}.MuiCollapse-wrapper{display:flex}.MuiCollapse-wrapperInner{width:100%}.jss2 span{color:#0288d1!important}.MuiDrawer-docked{flex:0 0 auto}.MuiDrawer-paper{top:0;flex:1 0 auto;height:100%;display:flex;outline:0;z-index:1200;position:fixed;overflow-y:auto;flex-direction:column;-webkit-overflow-scrolling:touch}.MuiDrawer-paperAnchorLeft{left:0;right:auto}.MuiDrawer-paperAnchorRight{left:auto;right:0}.MuiDrawer-paperAnchorTop{top:0;left:0;right:0;bottom:auto;height:auto;max-height:100%}.MuiDrawer-paperAnchorBottom{top:auto;left:0;right:0;bottom:0;height:auto;max-height:100%}.MuiDrawer-paperAnchorDockedLeft{border-right:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedTop{border-bottom:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedRight{border-left:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedBottom{border-top:1px solid rgba(0,0,0,.12)}.jss1{width:250px}</style><title data-react-helmet="true">NIKITA - Tutorial</title><meta data-react-helmet="true" name="description" content="Instructions on how to get up and running"/><meta data-react-helmet="true" name="keywords"/><meta data-react-helmet="true" name="google-site-verification" content="ukvG8Ae6z6Ly-ABtoUMWzRAPMmn07QWlbRnot0AC5FA"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="icon" href="/favicon-32x32.png?v=9d13235da211d425a803c9fac2207052" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#105859"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9d13235da211d425a803c9fac2207052"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9d13235da211d425a803c9fac2207052"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link as="script" rel="preload" href="/webpack-runtime-8c8ac25894d3025ca115.js"/><link as="script" rel="preload" href="/framework-68c705bbd7dd0549b337.js"/><link as="script" rel="preload" href="/app-b97dfcbd8fa3ec243b84.js"/><link as="script" rel="preload" href="/1bfc9850-1564930e3490c20d1c48.js"/><link as="script" rel="preload" href="/47eb6006744d7bec85ebfe00134e898b865be907-1850f258df5b7b7bc7ed.js"/><link as="script" rel="preload" href="/component---src-templates-page-js-4ea9ad0235acec797da5.js"/><link as="fetch" rel="preload" href="/page-data/current/guide/tutorial/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2288906906.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/393869461.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="MuiDrawer-root MuiDrawer-docked"><div class="MuiPaper-root MuiDrawer-paper jss1 MuiDrawer-paperAnchorLeft MuiDrawer-paperAnchorDockedLeft MuiPaper-elevation0"><style data-emotion="css lu9kr9">.css-lu9kr9{height:100%;background-color:#fff;}</style><div class="css-lu9kr9"><style data-emotion="css 1l0kciq">.css-1l0kciq{min-height:56px;background-color:#f2f2f2;border-bottom:1px solid #0000001f;padding-left:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;color:#757575;}@media (min-width:0px) and (orientation: landscape){.css-1l0kciq{min-height:48px;}}@media (min-width:600px){.css-1l0kciq{min-height:64px;}}.css-1l0kciq a{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;font-size:1rem;line-height:1.6rem;-webkit-text-decoration:none;text-decoration:none;color:rgba(0, 0, 0, 0.87);}</style><div class="css-1l0kciq"><a href="/">Documentation</a><span class="MuiTypography-root MuiTypography-caption">current version</span></div><style data-emotion="css 12o8uux">.css-12o8uux{min-height:calc(100% - 140px);}</style><div class="css-12o8uux"><nav class="MuiList-root MuiList-padding"><li class="MuiListItem-container"><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-0 MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button MuiListItem-secondaryAction" tabindex="-1" role="menuitem" aria-disabled="false" href="/project/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Project</span></div></a><div class="MuiListItemSecondaryAction-root"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span></button></div></li><li class="MuiListItem-container"><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-0 MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button MuiListItem-secondaryAction" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/api/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">API</span></div></a><div class="MuiListItemSecondaryAction-root"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span></button></div></li><li class="MuiListItem-container"><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-0 MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button MuiListItem-secondaryAction" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Guide</span></div></a><div class="MuiListItemSecondaryAction-root"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></svg></span></button></div></li><div class="MuiCollapse-container MuiCollapse-entered" style="min-height:0px"><div class="MuiCollapse-wrapper"><div class="MuiCollapse-wrapperInner"><style data-emotion="css 7weieg">.css-7weieg a{padding-left:24px;}.css-7weieg ul a{padding-left:32px;}</style><ul class="MuiList-root css-7weieg MuiList-padding"><style data-emotion="css k6umcd">.css-k6umcd div{margin:0;}.css-k6umcd div span{font-size:.9rem;color:#777777;}</style><a aria-current="page" class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button jss2" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/tutorial/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Tutorial</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/promise/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Action Promise</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/call/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Call</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/registry/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Action Registration</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/idempotence/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Idempotence and status</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/local_remote/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Local and Remote (SSH)</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/conditions/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Conditions</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/assertions/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Assertions</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/logging_debugging/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Logging and Debugging</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/control_flow/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Control Flow</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/error/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Error handling</span></div></a><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-k6umcd MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/guide/schema/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Schema definitions</span></div></a></ul></div></div></div><li class="MuiListItem-container"><a class="MuiButtonBase-root MuiListItem-root MuiMenuItem-root css-0 MuiMenuItem-gutters MuiListItem-gutters MuiListItem-button MuiListItem-secondaryAction" tabindex="-1" role="menuitem" aria-disabled="false" href="/current/actions/"><div class="MuiListItemText-root"><span class="MuiTypography-root MuiListItemText-primary MuiTypography-body1 MuiTypography-displayBlock">Actions</span></div></a><div class="MuiListItemSecondaryAction-root"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span></button></div></li></nav></div><style data-emotion="css u7f402">.css-u7f402{background-color:#f2f2f2;padding:16px;border-top:1px solid #0000001f;color:#757575;}.css-u7f402 a{-webkit-text-decoration:none;text-decoration:none;color:rgba(0, 0, 0, 0.87);}</style><div class="css-u7f402"><span class="MuiTypography-root MuiTypography-caption">Help us<!-- --> <a href="https://github.com/adaltas/node-nikita/issues">improve the docs</a> <!-- -->by fixing typos and proposing enhancements.</span></div></div></div></div><style data-emotion="css 5xpyki">.css-5xpyki{background-color:#12182f;-webkit-transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;width:calc(100% - 250px);margin-left:250px;-webkit-transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;}@media print{.css-5xpyki{position:absolute;}}</style><header class="MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary css-5xpyki mui-fixed MuiPaper-elevation4"><div class="MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"><style data-emotion="css 5pqvpo">.css-5pqvpo:hover{background-color:rgba(255,255,255, 0.15);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}</style><button class="MuiButtonBase-root MuiIconButton-root css-5pqvpo MuiIconButton-colorInherit" tabindex="0" type="button" aria-label="open drawer"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button><a href="/"><style data-emotion="css 19un28m">.css-19un28m{color:rgba(255,255,255,1);display:inline-block;line-height:inherit;font-size:2rem;font-weight:bold;letter-spacing:.3rem;padding-left:16px;padding-right:16px;margin-top:8px;border-radius:.5rem;text-transform:uppercase;-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.css-19un28m:hover{background-color:rgba(255,255,255, 0.15);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}</style><p class="MuiTypography-root css-19un28m MuiTypography-body1 MuiTypography-colorInherit MuiTypography-noWrap">Nikita<style data-emotion="css 43l2vl">.css-43l2vl{font-size:1.6rem;margin-left:8px;}</style><svg class="MuiSvgIcon-root css-43l2vl" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><g><path d=" M 7.307 6.867 L 10.46 6.867 C 10.703 6.867 10.9 7.064 10.9 7.307 L 10.9 12.293 C 10.9 12.536 11.097 12.733 11.34 12.733 L 14.86 12.733 C 15.103 12.733 15.3 12.93 15.3 13.173 L 15.3 18.16 C 15.3 18.403 15.103 18.6 14.86 18.6 L 7.307 18.6 C 7.064 18.6 6.867 18.403 6.867 18.16 L 6.867 7.307 C 6.867 7.064 7.064 6.867 7.307 6.867 Z "></path><path d=" M 12.367 4.373 L 12.367 10.827 C 12.367 11.07 12.564 11.267 12.807 11.267 L 18.16 11.267 C 18.403 11.267 18.6 11.07 18.6 10.827 L 18.6 4.373 C 18.6 4.13 18.403 3.933 18.16 3.933 L 12.807 3.933 C 12.564 3.933 12.367 4.13 12.367 4.373 Z "></path><path d=" M 16.767 14.64 L 16.767 19.627 C 16.767 19.87 16.57 20.067 16.327 20.067 L 11.34 20.067 C 11.097 20.067 10.9 20.264 10.9 20.507 L 10.9 22.56 C 10.9 22.803 11.097 23 11.34 23 L 19.26 23 C 19.503 23 19.7 22.803 19.7 22.56 L 19.7 14.64 C 19.7 14.397 19.503 14.2 19.26 14.2 L 17.207 14.2 C 16.964 14.2 16.767 14.397 16.767 14.64 Z "></path><path d=" M 9.8 20.507 L 9.8 21.093 C 9.8 21.336 9.603 21.533 9.36 21.533 L 4.373 21.533 C 4.13 21.533 3.933 21.336 3.933 21.093 L 3.933 14.64 C 3.933 14.397 4.13 14.2 4.373 14.2 L 4.96 14.2 C 5.203 14.2 5.4 14.397 5.4 14.64 L 5.4 19.627 C 5.4 19.87 5.597 20.067 5.84 20.067 L 9.36 20.067 C 9.603 20.067 9.8 20.264 9.8 20.507 Z "></path><path d=" M 5.4 8.773 L 5.4 12.293 C 5.4 12.536 5.203 12.733 4.96 12.733 L 1.44 12.733 C 1.197 12.733 1 12.536 1 12.293 L 1 8.773 C 1 8.53 1.197 8.333 1.44 8.333 L 4.96 8.333 C 5.203 8.333 5.4 8.53 5.4 8.773 Z "></path><path d=" M 10.093 3.933 L 8.04 3.933 C 7.797 3.933 7.6 3.736 7.6 3.493 L 7.6 1.44 C 7.6 1.197 7.797 1 8.04 1 L 10.093 1 C 10.336 1 10.533 1.197 10.533 1.44 L 10.533 3.493 C 10.533 3.736 10.336 3.933 10.093 3.933 Z "></path><path d=" M 20.067 5.84 L 20.067 7.893 C 20.067 8.136 20.264 8.333 20.507 8.333 L 22.56 8.333 C 22.803 8.333 23 8.136 23 7.893 L 23 5.84 C 23 5.597 22.803 5.4 22.56 5.4 L 20.507 5.4 C 20.264 5.4 20.067 5.597 20.067 5.84 Z "></path></g></svg></p></a><style data-emotion="css 11qjisw">.css-11qjisw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><div class="css-11qjisw"></div><div class="MuiBox-root jss3"><style data-emotion="css dnj7p9">.css-dnj7p9:hover{background-color:rgba(255,255,255, 0.15);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}</style><a class="MuiButtonBase-root MuiIconButton-root  css-dnj7p9 MuiIconButton-colorInherit" tabindex="0" aria-disabled="false" href="https://github.com/adaltas/node-nikita/issues" aria-labelledby="appbar-bug" title="Report an issue"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 .63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07.47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z"></path></svg></span></a></div><a class="MuiButtonBase-root MuiIconButton-root  css-dnj7p9 MuiIconButton-colorInherit" tabindex="0" aria-disabled="false" href="https://github.com/adaltas/node-nikita" aria-labelledby="appbar-github" title="Nikita GitHub Repository"><span class="MuiIconButton-label"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></span></a></div></header><style data-emotion="css 17kdwcj">.css-17kdwcj{width:100%;background-color:#fff;-webkit-transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;padding-top:64px;width:calc(100% - 250px);margin-left:250px;-webkit-transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;transition:margin 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,width 225ms cubic-bezier(0.0, 0, 0.2, 1) 0ms;}</style><div class="css-17kdwcj"><style data-emotion="css qcmqnh">.css-qcmqnh{padding-left:16px;padding-right:16px;padding-top:40px;margin:0px auto 40px;}@media (min-width:948px){.css-qcmqnh{max-width:1000px;}}@media (min-width:600px){.css-qcmqnh{padding-left:24px;padding-right:24px;}}</style><main class="css-qcmqnh"><style data-emotion="css pp9k86">.css-pp9k86{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:normal;font-size:2rem;line-height:1.167;word-wrap:break-word;color:#777777;margin-bottom:0.35em;}@media (min-width:600px){.css-pp9k86{font-size:2.5707rem;}}@media (min-width:960px){.css-pp9k86{font-size:2.7849rem;}}@media (min-width:1280px){.css-pp9k86{font-size:2.9991rem;}}</style><h1 class="css-pp9k86">Tutorial</h1><style data-emotion="css 1k7xr39">@media (min-width:960px){.css-1k7xr39{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;lign-items:flex-start;}}</style><div class="css-1k7xr39"><style data-emotion="css 1qiczci">.css-1qiczci{padding-top:16px;padding-bottom:8px;}@media (min-width:960px){.css-1qiczci{vertical-align:top;display:inline-block;position:-webkit-sticky;position:sticky;top:100px;padding-left:48px;-webkit-order:2;-ms-flex-order:2;order:2;height:100%;overflow:auto;}}</style><div class="css-1qiczci"><nav><style data-emotion="css 1o5yl0n">.css-1o5yl0n{color:#777777;font-size:14px;font-weight:500;text-transform:uppercase;}</style><span class="css-1o5yl0n">Table of Contents</span><style data-emotion="css 6otbh2">.css-6otbh2{margin:24px 0px;padding-left:0;}.css-6otbh2 li{list-style:none;margin-bottom:8px;}.css-6otbh2 a{font-size:.9rem;-webkit-text-decoration:none;text-decoration:none;}.css-6otbh2 a:link,.css-6otbh2 a:visited{color:#777777;}.css-6otbh2 a:hover{color:#03a9f4;}</style><ul class="css-6otbh2"><li><a href="/current/guide/tutorial/#what-is-nikita">What is Nikita?</a></li><li><a href="/current/guide/tutorial/#installation-instructions">Installation instructions</a></li><li><a href="/current/guide/tutorial/#core-concepts">Core concepts</a></li><li><a href="/current/guide/tutorial/#real-life-example">Real-life example</a></li></ul></nav></div><style data-emotion="css 1bpzzx8">.css-1bpzzx8{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;font-size:1rem;line-height:1.6rem;}.css-1bpzzx8 h2{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:normal;font-size:1.5rem;line-height:1.2;color:#777777;scroll-margin-top:calc(74px + 1rem);margin-bottom:0.35em;margin-top:32px;}@media (min-width:600px){.css-1bpzzx8 h2{font-size:1.6667rem;}}@media (min-width:960px){.css-1bpzzx8 h2{font-size:1.875rem;}}@media (min-width:1280px){.css-1bpzzx8 h2{font-size:2.0833rem;}}.css-1bpzzx8 h3{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:normal;font-size:1.25rem;line-height:1.167;color:#777777;scroll-margin-top:calc(74px + 1rem);margin-bottom:0.35em;margin-top:24px;}@media (min-width:600px){.css-1bpzzx8 h3{font-size:1.2853rem;}}@media (min-width:960px){.css-1bpzzx8 h3{font-size:1.4996rem;}}@media (min-width:1280px){.css-1bpzzx8 h3{font-size:1.4996rem;}}.css-1bpzzx8 blockquote{border-left:3px solid #777777;margin:0;padding-left:40px;}.css-1bpzzx8 blockquote p{color:#777777;}.css-1bpzzx8 blockquote p>code[class*="language-"]{color:#646464;}.css-1bpzzx8 ul{padding-left:16px;}.css-1bpzzx8 :not(pre)>code{padding:.1em .3em;background:#f0f0f5;color:#000;}.css-1bpzzx8 a{-webkit-text-decoration:none;text-decoration:none;}.css-1bpzzx8 a:link,.css-1bpzzx8 a:visited,.css-1bpzzx8 a>code{color:#0288d1;}.css-1bpzzx8 a:hover,.css-1bpzzx8 a:hover>code{-webkit-text-decoration:none;text-decoration:none;color:#03a9f4;}.css-1bpzzx8 .gatsby-highlight pre{background:#f0f0f5;}.css-1bpzzx8 .gatsby-highlight pre .token.operator,.css-1bpzzx8 .gatsby-highlight pre .token.entity,.css-1bpzzx8 .gatsby-highlight pre .token.url,.css-1bpzzx8 .gatsby-highlight pre .language-css .token.string,.css-1bpzzx8 .gatsby-highlight pre .style .token.string{color:inherit;background:inherit;}.css-1bpzzx8 .gatsby-highlight-code-line{background:rgba(255,255,255,.7);display:block;}@media (min-width:960px){.css-1bpzzx8{max-width:calc(100% - 200px);}}</style><div class="css-1bpzzx8"><p>This tutorial covers the basics to get started and to use Nikita. It is organized in 4 sections:</p><ul><li><a href="#what-is-nikita">What is Nikita?</a></li><li><a href="#installation-instructions">Installation instructions</a></li><li><a href="#core-concepts">Core concepts</a></li><li><a href="#real-life-example">Real-life example</a></li></ul><p>Feel free to skip the second section if you are familiar with Node.js and its ecosystem.</p><p>For detailed information, navigate the documentation or submit an issue if you don&#x27;t find the answers to your questions. Also, if you are looking for examples, the source code is well documented and its test coverage quite complete. We highly encourage you to navigate the tests. Tests are self-contained and very easy to understand. They also provide you the guaranty of reading a working code.</p><h2 id="what-is-nikita" style="position:relative"><a href="#what-is-nikita" aria-label="what is nikita permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is Nikita?</h2><p>Nikita is a toolkit to automate the execution of deployment workflows. Use one of the <a href="/current/actions/">many available actions</a> or create your own functions to build simple to complex deployment pipelines and infrastructures. Actions are transparently executed locally or remotely over SSH from any host.</p><h3 id="technologies" style="position:relative"><a href="#technologies" aria-label="technologies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Technologies</h3><p>Nikita is written in JavaScript and executed with Node.js. It is available on <a href="https://www.npmjs.com/package/nikita">NPM</a>.</p><h3 id="use-cases" style="position:relative"><a href="#use-cases" aria-label="use cases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use cases</h3><p>It serves multiple purposes. For example, it can be used in a website with a Node.js backend, where you want to execute actions (writing files, copy, move, executing custom scripts...) or you can use it to automate and orchestrate components&#x27; deployments (installations, functional tests, lifecycle management...).</p><p>Take a view at <a href="https://github.com/ryba-io/ryba">Ryba</a> which contains playbooks to set up and manage Big Data systems.</p><h3 id="supported-platforms" style="position:relative"><a href="#supported-platforms" aria-label="supported platforms permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported platforms</h3><p>Nikita targets Unix-like systems including Linux and macOS. Windows is not supported as a targeting node where actions are executed. It is however known to work as a Nikita host. This means you can run Nikita from a Windows host and target Linux nodes over SSH.</p><p>Throughout this tutorial, it is assumed you work on Linux or macOS. To be able to run the same code examples without modifications on Windows, you can install a Linux virtual machine or use Docker.</p><p>At the end of the tutorial, you will learn how to use Nikita over SSH. This way, your Windows host is used to create your workflow and you can target a remote host like a server, a virtual machine, or a container.</p><h3 id="what-is-inside-nikita" style="position:relative"><a href="#what-is-inside-nikita" aria-label="what is inside nikita permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is inside Nikita?</h3><p>Nikita comes with a set of default functions. It is bundled with many handy functions covering a large range of usages:</p><ul><li>write files</li><li>execute shell commands</li><li>package-management</li><li>run docker containers</li></ul><p>You are encouraged to extend Nikita with your own <a href="/current/api/">actions</a>. In its simplest form, writing an action is just about writing a plain vanilla JavaScript function.</p><h2 id="installation-instructions" style="position:relative"><a href="#installation-instructions" aria-label="installation instructions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation instructions</h2><h3 id="dependencies" style="position:relative"><a href="#dependencies" aria-label="dependencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependencies</h3><p>To run your code, you must have Node.js and NPM (or YARN) installed. The procedure depends on your operating system. There are multiple alternatives to install Node.js:</p><ul><li><a href="https://nodejs.org/en/download/">Download</a><br/>The <a href="https://nodejs.org/en/download/">official download page</a> provides you with the choices of downloading an installer, the binary files, and the source code.</li><li><a href="https://nodejs.org/en/download/package-manager/">Package manager</a><br/>The <a href="https://nodejs.org/en/download/package-manager/">package manager</a> is probably the fastest and easiest way to get Node.js installed and ready while being upgraded in the future. The choice of package managers will depend on your system.</li><li>Node.js version manager
<a href="https://github.com/creationix/nvm">NVM</a> and <a href="https://github.com/tj/n">N</a> will manage multiple versions of Node.js in parallel. For advanced users, this is the recommended procedure. We personally use <a href="https://github.com/tj/n">N</a>.</li></ul><p>Once installed, you should have the <code class="language-text">node</code> and <code class="language-text">npm</code> commands available from your terminal.</p><h3 id="initialization" style="position:relative"><a href="#initialization" aria-label="initialization permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initialization</h3><p>A Nikita project is commonly a Node.js package. Everything is a file and it doesn&#x27;t require you to rely on any external software such as a database. For this reason, it naturally integrates with <a href="https://en.wikipedia.org/wiki/Version_control">version control systems (VCS)</a> to track development iterations. Several tools are available such as <a href="https://git-scm.com/">Git</a> and <a href="https://www.mercurial-scm.org/">Mercurial</a>. In this tutorial, we will be using <a href="https://git-scm.com/">Git</a> and publish the source code to the <a href="https://github.com/adaltas/node-nikita-tutorial">node-nikita-tutorial repository on GitHub</a>.</p><p>We start by initializing a new Git project:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Create a new folder</span>
<span class="token function">mkdir</span> tutorial
<span class="token builtin class-name">cd</span> tutorial
<span class="token comment"># Initialize the git repository</span>
<span class="token function">git</span> init
<span class="token comment"># Change the URL with your remote repository URL</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/adaltas/node-nikita-tutorial.git
<span class="token comment"># Ignore files</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> .gitignore <span class="token operator">&lt;&lt;</span><span class="token string">MD
.*
/node_modules
!.gitignore
MD</span>
<span class="token comment"># Generate the readme file</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> README.md <span class="token operator">&lt;&lt;</span><span class="token string">MD
# Nikita tutorial

You will learn how to create a new project as well as the fundamentals of using
Nikita to automate the deployment of systems.

Please refer to the [official project documentation](http://nikita.adaltas.com/current/guide/tutorial/)
for additional information.
MD</span>
<span class="token comment"># Commit to git the project description</span>
<span class="token function">git</span> <span class="token function">add</span> .gitignore README.md
<span class="token function">git</span> commit -m <span class="token string">&quot;Project description&quot;</span></code></pre></div><p>A Nikita project is a Node.js project. Thus, we will use the <code class="language-text">npm init</code> command to create a new project. This is a common way to bootstrap a project with a default package definition file. The project&#x27;s unique required dependency is <code class="language-text">nikita</code>. There is no other external dependency to declare unless you need to.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Initialize a new project</span>
<span class="token function">npm</span> init
<span class="token comment"># Declare the Nikita dependency</span>
<span class="token function">npm</span> <span class="token function">add</span> nikita
<span class="token function">curl</span> https://raw.githubusercontent.com/adaltas/node-nikita/master/LICENSE -o LICENSE
<span class="token comment"># Commit to git the Node.js package declaration file</span>
<span class="token function">git</span> <span class="token function">add</span> package.json package-lock.json LICENSE
<span class="token function">git</span> commit -a -m <span class="token string">&quot;Package declaration file&quot;</span></code></pre></div><p>The <code class="language-text">npm init</code> command will ask you a few questions such as the project name and its version. You may run with default answers using the <code class="language-text">-y</code> option or get inspiration from this output:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">package name: (tutorial) nikita-tutorial
version: (1.0.0) 0.0.0
description: Learn how to use Nikita
entry point: (index.js) app.js
test command: mocha test/*.js
git repository: https://github.com/adaltas/node-nikita-tutorial.git
keywords: nikita tutorial
author: David Worms
license: (ISC) BSD-3-Clause</code></pre></div><p>A <a href="https://gist.github.com/robertkowalski/7620849">list of possible licenses</a> is available on Github.</p><h2 id="core-concepts" style="position:relative"><a href="#core-concepts" aria-label="core concepts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Core concepts</h2><p>Before installing something useful, let&#x27;s learn a few basics. Nikita is executed by the Node.js engine. It implies some experience in JavaScript. You don&#x27;t need to be a JS Ninja but some basic knowledge is required.</p><h3 id="about-coffeescript" style="position:relative"><a href="#about-coffeescript" aria-label="about coffeescript permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About CoffeeScript</h3><p>This tutorial is written in JavaScript to get you started quickly. If you navigate the Nikita source code, you&#x27;ll see it is written in CoffeeScript, a language that transpiles into JavaScript before being executed by the Node.js engine. Run <code class="language-text">npm install -g coffeescript</code> to install CoffeeScript globally. Unless you used a Node.js version manager, you will probably encounter a permission error. Read the NPM chapter about <a href="https://docs.npmjs.com/getting-started/fixing-npm-permissions">permissions</a> to select a solution or install it locally without the <code class="language-text">-g</code> option and use the command <code class="language-text">npx coffee</code> instead of <code class="language-text">coffee</code>. The <code class="language-text">npx</code> command is available within all Node.js installation.</p><p>CoffeeScript has a very clean syntax and is perfectly suited to the declarative aspect of the Nikita API. In the end, the source code looks like one written in YAML while preserving the advantages of a procedural language like JavaScript. A second advantage we found with CoffeeScript is its <a href="http://coffeescript.org/#literate">literate functionality</a> which lets you write Markdown files with CoffeeScript code inside. Your source code looks a bit like a Notebook, it is a markdown document with documentation and code organized in blocks.</p><h3 id="action" style="position:relative"><a href="#action" aria-label="action permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Action</h3><p>An action is the basic building block in Nikita. It is basically a function, called a handler, with some associated configuration, called <code class="language-text">config</code>. It is materialized as a JavaScript object, for example:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  who<span class="token operator">:</span> <span class="token string">&#x27;leon&#x27;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">$handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>who<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>As you can see, <code class="language-text">config</code> is made available as a destructure property of the first argument that the handler receives.</p><h3 id="calling-actions" style="position:relative"><a href="#calling-actions" aria-label="calling actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Calling actions</h3><p>To execute an action, you must create a Nikita session and execute the <code class="language-text">call</code> function:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// New Nikita session</span>
nikita
<span class="token comment">// Call an action</span>
<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  who<span class="token operator">:</span> <span class="token string">&#x27;leon&#x27;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">$handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>who<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>The function <code class="language-text">nikita.call</code> is very flexible in how arguments are passed. It receives zero to multiple objects which will be merged together. Also, a function is interpreted as the action handler, being converted to an object with the <code class="language-text">handler</code> property. It means the previous example could be rewritten as:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// New Nikita session</span>
nikita
<span class="token comment">// Call an action</span>
<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  who<span class="token operator">:</span> <span class="token string">&#x27;leon&#x27;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>who<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><h3 id="parent-action-and-children" style="position:relative"><a href="#parent-action-and-children" aria-label="parent action and children permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parent action and children</h3><p>The Nikita session is organized as a hierarchical tree of actions. The parent is an action of the higher level in the session tree. All Nikita&#x27;s actions have a parent action except the root Nikita action instantiating a Nikita session. The children are the actions executed in the handler of a parent action using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"><code class="language-text">this</code> keyword</a>:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Root action</span>
<span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am root&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Parent action</span>
<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am parent&#x27;</span><span class="token punctuation">)</span>
  <span class="token comment">// Child action</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am child&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>Alternatively, you can use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">JavaScript arrow function expressions</a> to reduce the syntax. In such a case, to call a child action you must use the <a href="/current/api/context/"><code class="language-text">context</code> property</a>, because arrow functions don&#x27;t accept a custom <code class="language-text">this</code> binding. <code class="language-text">context</code> is available inside the handler as a property of the first argument:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Root action</span>
<span class="token function">nikita</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am root&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Parent action</span>
<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>context<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am parent&#x27;</span><span class="token punctuation">)</span>
  <span class="token comment">// Child action</span>
  <span class="token function">context</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;I am child&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><h3 id="action-promise" style="position:relative"><a href="#action-promise" aria-label="action promise permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Action promise</h3><p>Nikita&#x27;s actions always resolve <a href="https://nodejs.dev/learn/understanding-javascript-promises">Javascript Promises</a>, they either fulfill with an action output or reject an error. To access the <a href="/current/api/output/">action output</a>, you have to use the Promise API or simply use the <a href="https://nodejs.dev/learn/modern-asynchronous-javascript-with-async-and-await"><code class="language-text">async/await</code> construction</a> to get the returned value.</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Call asynchronous function</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Define empty array</span>
  history <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// Access the action output</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#x27;first&#x27;</span><span class="token punctuation">)</span>
  <span class="token comment">// Run next synchronous function</span>
  history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token comment">// Print array</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span> <span class="token comment">// [ &#x27;first&#x27; ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><p>Nikita also provides you the guarantee that your actions are executed sequentially. The following example is calling 3 asynchronous actions of various duration. The <code class="language-text">history</code> array records their order of execution:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Define empty array</span>
  <span class="token keyword">var</span> history <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// Await result from Promise</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Call 1st action</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Fulfilled in 200ms</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;first&#x27;</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Call 2nd action</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Fulfilled in 100ms</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#x27;second&#x27;</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Return 3rd action</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&#x27;done&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Assert sequential execution</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token string">&#x27;done&#x27;</span><span class="token punctuation">)</span>
  assert<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span>history<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;first&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;second&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="error-handling" style="position:relative"><a href="#error-handling" aria-label="error handling permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h3><p>However, since actions returned promises, they cannot throw errors and stop the execution flow. To ensure errors are properly handled, it is your responsibility to raise them.</p><p>The above example must be rewritten to raise errors. For example, using the <code class="language-text">await</code> keyword, a simpler code looks like:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;called&#x27;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;catch me&#x27;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#x27;never called&#x27;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token string">&#x27;catch me&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="cascading-outputs-and-errors" style="position:relative"><a href="#cascading-outputs-and-errors" aria-label="cascading outputs and errors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cascading outputs and errors</h3><p>Instead of throw an error, it is also possible to return the promise of a child action. This way, both resolved output and errors are cascaded up to the parent actions:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>date<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>today<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>date<span class="token operator">:</span> today<span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Today is not the first day of the month&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="passing-metadata" style="position:relative"><a href="#passing-metadata" aria-label="passing metadata permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passing <code class="language-text">metadata</code></h3><p>Several properties are generic and globally available for every action. Examples include the <code class="language-text">header</code>, <code class="language-text">retry</code> and <code class="language-text">relax</code> properties. Those are called <a href="/current/api/metadata/">metadata properties</a>.</p><p>They are not to be confused with <a href="/current/api/config/">configuration properties</a>. A configuration property is declared and used by a single action. A metadata property applies to multiple if not all actions and are usually declared inside a plugin.</p><p>To avoid naming collisions with configuration properties, metadata properties are prefixed with a dollar sign (<code class="language-text">$</code>) and are available inside the action under the <code class="language-text">metadata</code> property:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $retry<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>metadata<span class="token operator">:</span> <span class="token punctuation">{</span>attempt<span class="token punctuation">,</span> retry<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>attempt <span class="token operator">&lt;</span> retry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Attempt </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>attempt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> out of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>retry<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;Please retry&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Prints:</span>
<span class="token comment">// Attempt 0 out of 3</span>
<span class="token comment">// Attempt 1 out of 3</span>
<span class="token comment">// Attempt 2 out of 3</span></code></pre></div><p>Note, the majority of properties prefixed with <code class="language-text">$</code> are metadata properties. There are however a few exceptions including <code class="language-text">$handler</code>, <code class="language-text">$plugins</code>, <code class="language-text">$ssh</code> as well as all <a href="/current/guide/conditions/">condition</a> and <a href="/current/guide/assertions/">assertion</a> properties.</p><h3 id="idempotence-and-status" style="position:relative"><a href="#idempotence-and-status" aria-label="idempotence and status permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Idempotence and status</h3><p>In the context of software deployment, idempotence means that an action with the same parameters can be executed multiple times without changing the final state of the system. It is a fundamental concept and every action in Nikita follows this principle.</p><p>The status is used and interpreted with different meanings but in most cases, it indicates that a change occurred. Read each action documentation in case of any doubt. For example, an action similar to the POSIX <code class="language-text">touch</code> command could be designed to return <code class="language-text">true</code> on its first run and <code class="language-text">false</code> later on because the file already exists:</p><blockquote><p>Important: you will encounter an error the second time you execute this code because the target file will be present and status will be set to <code class="language-text">true</code> instead of <code class="language-text">false</code>. Simply remove the file with <code class="language-text">rm /tmp/a_file</code> between each run to overcome this issue.</p></blockquote><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>
<span class="token comment">// Touch implementation</span>
<span class="token keyword">const</span> <span class="token function-variable function">touch</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span> 
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">&#x27;/tmp/a_file&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">&#x27;ENOENT&#x27;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#x27;/tmp/a_file&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token comment">// Calling actions</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// First time calling touch</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>touch<span class="token punctuation">)</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>$status<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token comment">// Second time calling touch</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>touch<span class="token punctuation">)</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>$status<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><p>Note, there is an existing <code class="language-text">nikita.file.touch</code> action which does just that with additional functionalities such as detecting and applying changes of ownerships and permissions.</p><h3 id="external-actions" style="position:relative"><a href="#external-actions" aria-label="external actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>External actions</h3><p>In order to reuse our new <code class="language-text">touch</code> action, we could isolate it into a separate file. The new file is called a module in Node.js terminology. Nikita <code class="language-text">call</code> will accept the exported object or function. Let&#x27;s create two files &quot;./lib/touch.js&quot; and &quot;app.js&quot;:</p><p>File &quot;./lib/touch.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>
<span class="token comment">// Touch implementation</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span> 
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">&#x27;/tmp/a_file&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">&#x27;ENOENT&#x27;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#x27;/tmp/a_file&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span></code></pre></div><p>File &quot;./app.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// New Nikita session</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&#x27;./lib/touch&#x27;</span><span class="token punctuation">)</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>$status<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="passing-config" style="position:relative"><a href="#passing-config" aria-label="passing config permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passing <code class="language-text">config</code></h3><p>The <code class="language-text">touch</code> action is now a separate Node.js module. It is a vanilla JavaScript function. You can create your own <code class="language-text">config</code> to control the behavior of your actions. In our example, we created the <code class="language-text">target</code> configuration property to know which file to touch:</p><p>File &quot;./lib/touch.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>
<span class="token comment">// Touch implementation</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span> 
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">&#x27;ENOENT&#x27;</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> err
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>target<span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span></code></pre></div><p>File &quot;./app.js&quot;: </p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// New Nikita session</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/a_file&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;./lib/touch&#x27;</span><span class="token punctuation">)</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>$status<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="registering-actions" style="position:relative"><a href="#registering-actions" aria-label="registering actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registering actions</h3><p>Instead of using the <code class="language-text">call</code> action, it might be more comfortable to call our <code class="language-text">touch</code> action by its name. To do so, we will register it. Actions can be registered in the current Nikita session or globally. In the example below, we will register it in the session:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// New Nikita session</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> nikita
  <span class="token comment">// Register the touch action</span>
  <span class="token punctuation">.</span>registry<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>touch<span class="token operator">:</span> <span class="token string">&#x27;./lib/touch&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Calling the registered action</span>
  <span class="token punctuation">.</span><span class="token function">touch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/a_file&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Validation</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>$status<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h2 id="real-life-example" style="position:relative"><a href="#real-life-example" aria-label="real life example permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Real-life example</h2><p>For the sake of this tutorial, we will create a basic Redis installation. The installation steps are:</p><ol><li>Source compilation<br/><em>Learn how to execute shell commands and use conditions.</em></li><li>Redis configuration file<br/><em>Learn how to merge or overwrite a configuration by serializing a JavaScript vanilla object.</em></li><li>CLI reporting and logs<br/><em>Learn how to activate pretty reporting and detailed logs written in Markdown.</em></li><li>Get the server up and running<br/><em>Learn how to leverage exit code to alter the action status.</em></li><li>Checking the service health<br/><em>Learn how to use the <code class="language-text">relax</code> and <code class="language-text">shy</code> metadata.</em></li><li>SSH activation<br/><em>Learn how easy and transparent it is to activate SSH.</em></li><li>Composition<br/><em>Learn how to chain multiple actions sequentially and compose them as children of other actions.</em></li></ol><h3 id="1-source-compilation" style="position:relative"><a href="#1-source-compilation" aria-label="1 source compilation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Source compilation</h3><p><em>Learn how to execute shell commands and use conditions.</em></p><p>Following the <a href="https://redis.io/topics/quickstart">Redis quickstart guide</a>, getting Redis up and ready is about downloading the package and executing the <code class="language-text">redis-server</code> command. We will do this with idempotence in mind.</p><p>The existing <code class="language-text">nikita.file.download</code> action is used to dowload Redis:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> nikita<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token string">&#x27;http://download.redis.io/redis-stable.tar.gz&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/cache/redis-stable.tar.gz&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Redis downloaded:&#x27;</span><span class="token punctuation">,</span> $status <span class="token operator">?</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;-&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><p>The second time <code class="language-text">nikita.file.download</code> is called, it checks if the target exists and bypasses the download in such case, thus speeding up the execution. You could also adjust this behavior based on the file signature by using one of the &quot;md5&quot;, &quot;sha1&quot; and &quot;sha256&quot; configuration properties.</p><p>To extract and compile Redis, a custom shell script is only be executed if a specific generated file does not already exist. Nikita comes with a few native conditions prefixed with &quot;$if<em>&quot; and their associated negation prefixed with &quot;$unless</em>&quot;. The <code class="language-text">nikita.execute</code> action to execute shell scripts:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> nikita<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $unless_exists<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/redis-stable/src/redis-server&#x27;</span><span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    tar xzf /tmp/nikita-tutorial/cache/redis-stable.tar.gz -C /tmp/nikita-tutorial
    cd /tmp/nikita-tutorial/redis-stable
    make
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Redis compiled:&#x27;</span><span class="token punctuation">,</span> $status <span class="token operator">?</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;-&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><p>It is annoying and not flexible to always provide the same an absolute base directory like &quot;/tmp/nikita-tutorial&quot; each time. Among many others, the <code class="language-text">nikita.execute</code> action comes with the <code class="language-text">cwd</code> configuration property. The acronym stands for &quot;current working directory&quot;. The command is rewritten as:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> nikita<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $unless_exists<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/redis-stable/src/redis-server&#x27;</span><span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    tar xzf cache/redis-stable.tar.gz
    cd redis-stable
    make
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial&#x27;</span><span class="token punctuation">,</span>  <span class="token comment">// Define current working directory</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Redis compiled:&#x27;</span><span class="token punctuation">,</span> $status <span class="token operator">?</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;-&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="2-redis-configuration-file" style="position:relative"><a href="#2-redis-configuration-file" aria-label="2 redis configuration file permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Redis configuration file</h3><p><em>Learn how to merge or overwrite a configuration by serializing a JavaScript vanilla object.</em></p><p>Before starting the server, we create a configuration file. The Redis format is made of key-value pairs separated by spaces. This type of format can be handled with the <code class="language-text">nikita.file.properties</code> action with a custom <code class="language-text">separator</code> configuration set to one space. The action also comes with some handy config like <code class="language-text">comment</code> to preserve comments and <code class="language-text">merge</code> to preserve the properties already present in the file. </p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token punctuation">{</span>$status<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> nikita<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;bind&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;daemonize&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;protected-mode&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;port&#x27;</span><span class="token operator">:</span> <span class="token number">6379</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/conf/redis.conf&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Redis configuration set:&#x27;</span><span class="token punctuation">,</span> $status <span class="token operator">?</span> <span class="token string">&#x27;&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;-&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><h3 id="3-cli-reporting-and-logs" style="position:relative"><a href="#3-cli-reporting-and-logs" aria-label="3 cli reporting and logs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. CLI reporting and logs</h3><p><em>Learn how to activate pretty reporting and detailed logs written in Markdown.</em></p><p>So far, we retrieved the action output to manually print a message for the user with the <code class="language-text">console.info</code> function completed by character depending the the execution status. This process is automatically managed by the <code class="language-text">nikita.log.cli</code> action. A message is printed to the user terminal whenever the <code class="language-text">header</code> metadata property is present:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Activate CLI reporting</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// Call any action</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis configuration&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// CLI messages</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;bind&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;daemonize&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;protected-mode&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;port&#x27;</span><span class="token operator">:</span> <span class="token number">6379</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/redis-stable/redis.conf&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>The message contains information such as the hostname or the IP address where the action is executed, the custom header, the status symbol, and the time of execution. It ends with <code class="language-text"></code> to indicate the termination of the Nikita session:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">localhost   Redis configuration     109ms
localhost        </code></pre></div><p>What if an action failed and the error message is not explicit enough? What if a system command failed and we need to dig and get detailed information? Nikita doesn&#x27;t have to run as a black box. Multiple error reporting actions are made available such as the <code class="language-text">nikita.log.md</code> which writes logs in the Markdown format:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Activate Markdown reporting</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">md</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    basedir<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/log&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Call any action</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// The Markdown header</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis configuration&#x27;</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;bind&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;daemonize&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;protected-mode&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;port&#x27;</span><span class="token operator">:</span> <span class="token number">6379</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/conf/redis.conf&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>Under the hood, both the <code class="language-text">nikita.log.cli</code> and the <code class="language-text">nikita.log.md</code> actions leverage the native Node.js <a href="https://nodejs.org/api/events.html">event API</a>. You can get more detailed information by visiting the <a href="/current/guide/logging_debugging/">Logging and Debugging</a> documentation.</p><p>Finally, if you need to quickly access verbose debugging information, use the <code class="language-text">debug</code> metadata property:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $debug<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// The Markdown header</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis configuration&#x27;</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;bind&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;daemonize&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;protected-mode&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;port&#x27;</span><span class="token operator">:</span> <span class="token number">6379</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/conf/redis.conf&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><h3 id="4-get-the-server-up-and-running" style="position:relative"><a href="#4-get-the-server-up-and-running" aria-label="4 get the server up and running permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Get the server up and running</h3><p><em>Learn how to leverage exit code to alter the action status.</em></p><p>The Redis server is now configured and ready to be started. The status reflects whether the server was already started or not based on the <a href="https://tldp.org/LDP/abs/html/exitcodes.html">shell exit code</a>. The value <code class="language-text">0</code> will indicate that the server was started, the value <code class="language-text">42</code> will indicate that it was already running and any other exit code will be treated as an error.</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Startup&#x27;</span><span class="token punctuation">,</span>
    code_skipped<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    # Exit code 3 if ping is successful
    redis-stable/src/redis-cli ping &amp;&amp; exit 3
    # Otherwise start the server
    nohup redis-stable/src/redis-server conf/redis.conf &amp;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><h3 id="5-checking-the-service-health" style="position:relative"><a href="#5-checking-the-service-health" aria-label="5 checking the service health permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Checking the service health</h3><p><em>Learn how to use the <code class="language-text">relax</code> and <code class="language-text">shy</code> metadata.</em></p><p>The Redis <code class="language-text">PING</code> command is expected to return <code class="language-text">PONG</code> if the server is healthy. Let&#x27;s take this use case to illustrate the usage of the <code class="language-text">relax</code> and <code class="language-text">shy</code> metadata properties.</p><p>The <code class="language-text">relax</code> metadata resolves the action successfully with the error placed inside the resulting output instead of rejecting the exception, thus allowing the Nikita session to exit gracefully while printing <code class="language-text"></code> in case of any error. </p><p>Similarly, the <code class="language-text">shy</code> metadata will allow us to set the status to <code class="language-text">true</code>, but print <code class="language-text">-</code> on success without modifying the status of the parent <code class="language-text">nikita.call</code> action, because it is not considered as a change of state.</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis Check&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $header<span class="token operator">:</span> <span class="token string">&quot;Check&quot;</span><span class="token punctuation">,</span>
      $relax<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      $shy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cwd<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial&#x27;</span><span class="token punctuation">,</span>
      command<span class="token operator">:</span> <span class="token string">&#x27;redis-stable/src/redis-cli -h 127.0.0.1 -p 6379 ping | grep PONG&#x27;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>When the Redis server is started, it prints:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">localhost   Redis Check : Check   -  12ms
localhost   Redis Check   -  18ms
localhost        </code></pre></div><p>Running the same code without <code class="language-text">shy: true</code> would print:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">localhost   Redis Check : Check     13ms
localhost   Redis Check     18ms
localhost        </code></pre></div><p>When the Redis server is not started, it prints: </p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">localhost   Redis Check : Check     12ms
localhost   Redis Check   -  17ms
localhost        </code></pre></div><h3 id="6-ssh-activation" style="position:relative"><a href="#6-ssh-activation" aria-label="6 ssh activation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. SSH activation</h3><p><em>Learn how easy and transparent it is to activate SSH.</em></p><p>Nikita is written from the ground up to be transparent whether it is executed locally or over SSH. In fact, <a href="/project/developers/#tests-execution">the majority of the tests</a> are contextualized with an ssh argument and are executed twice. The first time locally when the connection is set to null and the second time remotely with an SSH configuration object.</p><p>Calling <code class="language-text">nikita.ssh.open</code> and <code class="language-text">nikita.ssh.close</code> will associate Nikita&#x27;s current session with and without an SSH connection. The <code class="language-text">nikita.ssh.open</code> action must be registered before scheduling any other actions and, inversely, the <code class="language-text">nikita.ssh.close</code> action must be registered last. </p><blockquote><p>Note: both the <code class="language-text">nikita.log.cli</code> and <code class="language-text">nikital.log.md</code> actions are always executed locally. When SSH is setup, passing the <code class="language-text">$ssh</code> property to actions may activate and deactivate the SSH connection.</p></blockquote><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// Open the SSH Connection</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;SSH open&#x27;</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    private_key_path<span class="token operator">:</span> <span class="token string">&#x27;~/.ssh/id_rsa&#x27;</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">USER</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Call one or multiple actions</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Business as usual&#x27;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Close the SSH Connection</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;SSH close&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>The above example assumes that you can self connect with SSH locally. If this is not the case, SSH must be installed and listening on port 22 and you must follow the instructions targeting your operating system to get it up and running. A pair of SSH private and public keys, respectively installed in the files &quot;~/.ssh/id_rsa&quot; and &quot;~/.ssh/id_rsa.pub&quot;, must be present and your public key must be registered inside &quot;~/.ssh/authorized_keys&quot;. If this isn&#x27;t already the case, you can run the following commands:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Detect if private key is already present</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -f ~/.ssh/id_rsa <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># Generate private and public keys</span>
  ssh-keygen -t rsa -f ~/.ssh/id_rsa -N <span class="token string">&#x27;&#x27;</span>
<span class="token keyword">fi</span>
<span class="token comment"># Allow self access</span>
<span class="token function">cat</span> ~/.ssh/id_rsa.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token comment"># Ensure permissions are valid</span>
<span class="token function">chmod</span> 0700 ~/.ssh
<span class="token function">chmod</span> 0600 ~/.ssh/authorized_keys
<span class="token comment"># Test access</span>
<span class="token function">ssh</span> <span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span>@127.0.0.1 <span class="token string">&quot;echo &#x27;I am inside&#x27;; exit&quot;</span></code></pre></div><h3 id="7-composition" style="position:relative"><a href="#7-composition" aria-label="7 composition permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Composition</h3><p><em>Learn how to chain multiple actions sequentially and compose them as children of other actions.</em></p><p>It is time to finalize our script and run all these actions sequentially. Every time an action is called, it is scheduled inside the internal Nikita session for later execution.</p><p>It is also possible to group multiple actions into one action, creating a hierarchical representation and enabling composition. In our example, we will regroup all Redis actions related to the Redis installation into a single action.</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> nikita <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;nikita&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cwd <span class="token operator">=</span> <span class="token string">&#x27;/tmp/nikita-tutorial&#x27;</span><span class="token punctuation">;</span>
<span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">md</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    basedir<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/log</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;SSH Open&#x27;</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">USER</span><span class="token punctuation">,</span>
    private_key_path<span class="token operator">:</span> <span class="token string">&#x27;~/.ssh/id_rsa&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis installation&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $header<span class="token operator">:</span> <span class="token string">&#x27;Downloading&#x27;</span><span class="token punctuation">,</span>
      source<span class="token operator">:</span> <span class="token string">&#x27;http://download.redis.io/redis-stable.tar.gz&#x27;</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/cache/redis-stable.tar.gz</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $header<span class="token operator">:</span> <span class="token string">&#x27;Compilation&#x27;</span><span class="token punctuation">,</span>
      $unless_exists<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/redis-stable/src/redis-server</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      cwd<span class="token operator">:</span> cwd<span class="token punctuation">,</span>
      command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      tar xzf cache/redis-stable.tar.gz
      cd redis-stable
      make
      </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $header<span class="token operator">:</span> <span class="token string">&#x27;Configuration&#x27;</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/conf/redis.conf</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#x27;bind&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;daemonize&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;protected-mode&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;yes&#x27;</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;port&#x27;</span><span class="token operator">:</span> <span class="token number">6379</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $header<span class="token operator">:</span> <span class="token string">&#x27;Startup&#x27;</span><span class="token punctuation">,</span>
      cwd<span class="token operator">:</span> cwd<span class="token punctuation">,</span>
      code_skipped<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      redis-stable/src/redis-cli ping &amp;&amp; exit 3
      nohup redis-stable/src/redis-server conf/redis.conf &amp;
      </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Redis Check&#x27;</span><span class="token punctuation">,</span>
    $relax<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    $shy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> cwd<span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token string">&#x27;redis-stable/src/redis-cli -h 127.0.0.1 -p 6379 ping | grep PONG&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;SSH Close&#x27;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>Finally, we will split this code into one file to pilot our application and two files to encapsulate our install and check actions. We will also enhance our actions with a more flexible configuration:</p><p>File &quot;app.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Dependencies</span>
<span class="token keyword">const</span> nikita <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;nikita&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> install <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./lib/install&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> check <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./lib/check&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Configuration</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  ssh<span class="token operator">:</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">&#x27;127.0.0.1&#x27;</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    private_key_path<span class="token operator">:</span> <span class="token string">&#x27;~/.ssh/id_rsa&#x27;</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">USER</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  redis<span class="token operator">:</span> <span class="token punctuation">{</span>
    cwd<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial&#x27;</span><span class="token punctuation">,</span>
    config<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Run the application</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">nikita</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">md</span><span class="token punctuation">(</span><span class="token punctuation">{</span>basedir<span class="token operator">:</span> <span class="token string">&#x27;/tmp/nikita-tutorial/log&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>$header<span class="token operator">:</span> <span class="token string">&#x27;SSH Open&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>ssh<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>$header<span class="token operator">:</span> <span class="token string">&#x27;Redis Install&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>redis<span class="token punctuation">,</span> install<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>$header<span class="token operator">:</span> <span class="token string">&#x27;Redis Check&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span>redis<span class="token punctuation">,</span> check<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ssh<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">{</span>$header<span class="token operator">:</span> <span class="token string">&#x27;SSH Close&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>File &quot;./lib/install.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Default configs</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">&#x27;http://download.redis.io/redis-stable.tar.gz&#x27;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;bind&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;bind&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#x27;127.0.0.1&#x27;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;daemonize&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;daemonize&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#x27;yes&#x27;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;protected-mode&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;protected-mode&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#x27;yes&#x27;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&#x27;port&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6379</span> <span class="token punctuation">}</span>
  <span class="token comment">// Do the job</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Download&#x27;</span><span class="token punctuation">,</span>
    source<span class="token operator">:</span> config<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/cache/redis-stable.tar.gz</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Compilation&#x27;</span><span class="token punctuation">,</span>
    $unless_exists<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/redis-stable/src/redis-server</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> config<span class="token punctuation">.</span>cwd<span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    tar xzf cache/redis-stable.tar.gz
    cd redis-stable
    make
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Configuration&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>cwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/conf/redis.conf</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    separator<span class="token operator">:</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> config<span class="token punctuation">.</span>config
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Startup&#x27;</span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> config<span class="token punctuation">.</span>cwd<span class="token punctuation">,</span>
    code_skipped<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    redis-stable/src/redis-cli ping &amp;&amp; exit 3
    nohup redis-stable/src/redis-server conf/redis.conf &amp;
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div><p>File &quot;./lib/check.js&quot;:</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Get option from config if present</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>config<span class="token punctuation">.</span>host<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>host <span class="token operator">=</span> config<span class="token punctuation">.</span>config<span class="token punctuation">.</span>host <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>config<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>port <span class="token operator">=</span> config<span class="token punctuation">.</span>config<span class="token punctuation">.</span>port <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Default configs</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>host<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>host <span class="token operator">=</span> <span class="token string">&#x27;127.0.0.1&#x27;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>config<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">{</span> config<span class="token punctuation">.</span>port <span class="token operator">=</span> <span class="token number">6379</span> <span class="token punctuation">}</span>
  <span class="token comment">// Do the job</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    $header<span class="token operator">:</span> <span class="token string">&#x27;Check&#x27;</span><span class="token punctuation">,</span>
    $relax<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    $shy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    cwd<span class="token operator">:</span> config<span class="token punctuation">.</span>cwd<span class="token punctuation">,</span>
    command<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">redis-stable/src/redis-cli -h </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -p </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ping</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></div></div><style data-emotion="css mv6mez">.css-mv6mez{margin-top:40px;text-transform:inherit;color:#777777!important;}.css-mv6mez svg{margin-right:8px;}</style><a class="MuiButtonBase-root MuiButton-root MuiButton-text css-mv6mez" tabindex="0" aria-disabled="false" href="https://github.com/adaltas/node-nikita/edit/master/docs/content/guide/tutorial.md"><span class="MuiButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"></path></svg>Edit on GitHub</span></a></main><style data-emotion="css 1lhxuy3">.css-1lhxuy3{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background-color:#12182f;}</style><footer class="css-1lhxuy3"><style data-emotion="css ts1smx">.css-ts1smx{padding-left:16px;padding-right:16px;-webkit-flex:1 1 100%;-ms-flex:1 1 100%;flex:1 1 100%;max-width:100%;margin:0 auto;}@media (min-width:948px){.css-ts1smx{max-width:900px;}}@media (min-width:600px){.css-ts1smx{padding-left:24px;padding-right:24px;}}</style><div class="css-ts1smx"><div class="MuiGrid-root MuiGrid-container"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-6 MuiGrid-grid-sm-3"><style data-emotion="css 1koq0fi">.css-1koq0fi{padding:16px;text-align:justify;color:#CCC8C7;}</style><div class="css-1koq0fi"><style data-emotion="css hc1elq">.css-hc1elq{color:#CCC8C7;}</style><h6 class="MuiTypography-root css-hc1elq MuiTypography-subtitle1">Navigate</h6><style data-emotion="css ylqgs9">.css-ylqgs9{margin:8px 0px;padding:0;list-style:none;color:#CCC8C7;}.css-ylqgs9 li{margin:0;padding:0;list-style:none;}.css-ylqgs9 a{color:#fff;-webkit-text-decoration:none;text-decoration:none;}.css-ylqgs9 a:hover{color:#0288d1;}</style><ul class="css-ylqgs9"><li><a href="/project/">Project</a></li><li><a href="/current/api/">API</a></li><li><a href="/current/guide/">Guide</a></li><li><a href="/current/actions/">Actions</a></li></ul></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-6 MuiGrid-grid-sm-3"><div class="css-1koq0fi"><h6 class="MuiTypography-root css-hc1elq MuiTypography-subtitle1">Contribute</h6><ul class="css-ylqgs9"><li><a href="https://github.com/adaltas/node-nikita">GitHub</a></li><li><a href="https://github.com/adaltas/node-nikita/issues">Issue Tracker</a></li><li><a href="/project/license/">License</a></li></ul></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-6"><div class="css-1koq0fi"><h6 class="MuiTypography-root css-hc1elq MuiTypography-subtitle1">About</h6><style data-emotion="css 15t6ozu">.css-15t6ozu{margin:8px 0px;color:#CCC8C7;}.css-15t6ozu a{color:#fff;-webkit-text-decoration:none;text-decoration:none;}.css-15t6ozu a:hover{color:#0288d1;}</style><p class="MuiTypography-root css-15t6ozu MuiTypography-body1">Nikita is an open source project hosted on <a href="https://github.com/adaltas/node-nikita/" target="_blank" rel="noopener">GitHub</a> and developed by <a href="http://www.adaltas.com" target="_blank" rel="noopener">Adaltas</a>.</p></div></div></div></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-1322093-4', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/current/guide/tutorial/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-75f0675d389a36ffbf76.js"],"app":["/app-b97dfcbd8fa3ec243b84.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-5c4f93251761eeb632de.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0a2420a9630c56d73e36.js"],"component---src-pages-current-actions-js":["/component---src-pages-current-actions-js-d05810f01c6ec06e0d8b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-90e9a9f621b928fc9284.js"],"component---src-templates-action-js":["/component---src-templates-action-js-aa7602f16e86604060d3.js"],"component---src-templates-package-js":["/component---src-templates-package-js-ba3b3bb30525b35f672a.js"],"component---src-templates-page-js":["/component---src-templates-page-js-4ea9ad0235acec797da5.js"]};/*]]>*/</script><script src="/polyfill-75f0675d389a36ffbf76.js" nomodule=""></script><script src="/component---src-templates-page-js-4ea9ad0235acec797da5.js" async=""></script><script src="/47eb6006744d7bec85ebfe00134e898b865be907-1850f258df5b7b7bc7ed.js" async=""></script><script src="/1bfc9850-1564930e3490c20d1c48.js" async=""></script><script src="/app-b97dfcbd8fa3ec243b84.js" async=""></script><script src="/framework-68c705bbd7dd0549b337.js" async=""></script><script src="/webpack-runtime-8c8ac25894d3025ca115.js" async=""></script></body></html>