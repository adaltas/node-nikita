// Generated by CoffeeScript 1.9.1
module.exports = function(options, callback) {
  var binddn, dn, passwd, uri;
  binddn = options.binddn ? "-D " + options.binddn : '';
  passwd = options.passwd ? "-w " + options.passwd : '';
  if (options.url) {
    console.log("Mecano: option 'options.url' is deprecated, use 'options.uri'");
    if (options.uri == null) {
      options.uri = options.url;
    }
  }
  if (options.uri === true) {
    options.uri = 'ldapi:///';
  }
  uri = options.uri ? "-H " + options.uri : '';
  if (!options.dn) {
    return callback(Error("Mecano `ldap_delete`: required property 'dn'"));
  }
  if (!Array.isArray(options.dn)) {
    options.dn = [options.dn];
  }
  dn = options.dn.map(function(dn) {
    return "'" + dn + "'";
  }).join(' ');
  return this.execute({
    cmd: "ldapdelete " + binddn + " " + passwd + " " + uri + " " + dn
  }, function(err, executed, stdout, stderr) {
    if (err) {
      return callback(err);
    }
    return callback(err, executed);
  });
};
